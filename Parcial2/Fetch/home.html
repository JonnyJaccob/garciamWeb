<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/garciamaWeb/Extra/bootstrap-4.0.0-dist/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="/garciamaWeb/Extra/jquery/jquery-3.6.1.min.js"></script>
    <style>
        *{
            margin:0px;
            padding:0px;
        }
        
    </style>
</head>
<body>
    <div class="produccion">
        <div class="logo">
            <img src="imagenes\logo2_3.png"> 
        </div>
        <div class="ccarta" id="ilus">
            <img id="cartaFoto" src="imagenes\cartax.jpg" alt="Carta" >
        </div>
        
        
    </div>
    <h1>fetch</h1>
    <div class="prueba">
        <button id="btnPeticion">Peticion</button>
        <div id="broma">
            <table>
                <thead>
                    <tr>
                        <th>Key</th>
                        <th>name</th>
                        <th>Elixir</th>
                        <th>Type</th>
                        <th>Rarity</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody id="tablabody_royale"></tbody>
            </table>
        </div>
    </div>
    
    <script>
        /*document.getElementById("btnPeticion").addEventListener("click",function(){
            url = "x";
            fetch(url)
                //.then((respuesta) => {console.log(respuesta)});
                .then((respuesta) => respuesta.json())
                .then(datoJson => document.getElementById("broma").innerHTML= datoJson.value); //[value] ["value"]
        });*/
        
        btnPeticion.addEventListener("click",function(){
            poner();
            listUser();
        });
        const poner = () =>{
            let table_body = ``;//alt+96
            var url1 = "https://royaleapi.github.io/cr-api-data/json/cards.json"
            fetch(url1)
            
                //.then((respuesta) => {console.log(respuesta)});
                .then(respuesta => respuesta.json())
                .then(datoJson => datoJson.forEach((user, index) => {
                    table_body += `<tr>
                        <td>${user.key}</td>
                        <td>${user.name}</td>
                        <td>${user.elixir}</td>
                        <td>${user.type}</td>
                        <td>${user.rarity}</td>
                        <td>${user.description}</td>
                    </tr>`;
                    console.log(user.key);
                })
            );
            tablabody_royale.innerHTML = table_body;
            
        }
        var requestURL = 'https://royaleapi.github.io/cr-api-data/json/cards.json';
        var request = new XMLHttpRequest();
        request.open('GET', requestURL);
        request.responseType = 'json';
        request.send();
        (function($) {
            $.fn.invisible = function() {
                return this.each(function() {
                    $(this).css("visibility", "hidden");
                });
            };
            $.fn.visible = function() {
                return this.each(function() {
                    $(this).css("visibility", "visible");
                });
            };
        }(jQuery));
        $("#seccion-cofre").on('click', function() {
            $("#estadistica").visibility = "visible";
            $("#estadistica").invisible();
            $("#estadistica").visible();
            $("#cofre1").attr("src","imagenes/cofre2.png");
        });
        const listUser = async () =>{
    const response = await fetch('https://royaleapi.github.io/cr-api-data/json/cards.json');const users = await response.json();let table_body = ``;users.forEach((user, index) => { table_body += `<tr><td>${user.key}</td>
            <td>${user.name}</td>
            <td>${user.elixir}</td>
            <td>${user.type}</td>
            <td>${user.rarity}</td>
            <td>${user.description}</td>
        </tr>`
    });
    //document.getElementById("tablabody_royale").innerHTML = table_body;
    tablabody_royale.innerHTML = table_body;
}
    </script>
</body>
</html>